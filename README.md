这是一个基于 [**LibreSpark/LibreTV**](https://github.com/LibreSpark/LibreTV) 的深度优化分支，在保留其核心功能的基础上，进行了大量代码重构，并增加了多项提升用户体验的实用功能。

## 🚀 主要特性与上游差异

### 首页 (Homepage)

- **⚙️ 设置项**：新增“预加载集数”开关，优化性能与流量控制。
- **📺 M3U直播**：集成 M3U 电视直播播放器入口 ([项目地址](https://github.com/sjnhnp/m3u-player))。
- **🏡 首页弹窗**：“继续观看”弹窗同样支持按**单集进度**恢复播放。
- **🔍 智能历史**：由“豆瓣热门”推荐产生的搜索结果将不再计入个人搜索历史。

### 播放页 (Player Page)

- **▶️ 播放器**：核心沿用稳定性高的 DPlayer。
- **🧠 增强记忆**：独立于“观看历史”的**单集粒度**播放进度记忆。
- **📖 精准历史**：观看历史会独立保存**每一集**的记录，而非仅记录到整部剧。
- **🛠️ 兼容性修复**：解决部分浏览器切换集数后无法自动播放的问题。
- **⌨️ 全局快捷键**：在播放页任意位置均可使用快捷键控制播放。
- **⏩ 跳过片头/片尾**：支持自定义跳过时长（秒）。
- **🔒 锁屏优化**：锁屏状态下，依然可以通过右上角按钮或 `F` 键进入全屏。
- **↩️ 返回优化**：点击“返回”按钮可立即回到之前的搜索结果页，操作更直观。
- **✨ UI优化**：当视频仅有单集时，自动隐藏集数列表区域。
- **🔀 无缝换线**：切换不同线路时，能**保持当前播放进度**，实现无缝切换。
- **📱 安卓端触摸优化**：
    | 操作 | 触摸位置 | 触发行为 |
    | :--- | :--- | :--- |
    | **单击触摸** | 中央播放/暂停按钮区域 | 暂停/播放，并显示中央按钮与控制条 |
    | **单击触摸** | 除中央按钮外的其它区域 | 无任何行为 |
    | **长按** | 播放器右侧区域 | 快进2x，松手后1x |
    | **长按** | 播放器区域 | 显示中央按钮与控制条 |
    | **双击操作** | 播放器其它区域 (非右侧) | 暂停/播放 |

### 🔧 代码
- 大量代码经过重构，提升可维护性和性能。

## 部署指南 (Deployment)

本项目可一键部署于 Cloudflare Pages 或 Vercel。基础部署流程请参考 [**上游项目文档**](https://github.com/LibreSpark/LibreTV)。

### Cloudflare Worker 代理配置

如果您为此项目配置了代理 Worker，您需要在 Cloudflare Pages 项目的 `设置` -> `函数` -> `绑定` 中添加以下绑定：

#### 1. KV Namespace Binding
- **变量名称 (Variable name):** `LIBRETV_PROXY_KV`
- **KV 命名空间 (KV namespace):** (选择您为代理创建的KV)

#### 2. Secrets Binding
- **变量名称 (Variable name):** `PASSWORD`
- **密钥值 (Secret text):** (输入您为代理设定的密码)

## 许可证 (License)

本项目遵循与上游项目相同的许可证。