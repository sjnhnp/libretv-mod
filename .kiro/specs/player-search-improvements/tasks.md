# 播放页搜索弹窗改进实施计划

- [x] 1. 搜索弹窗样式精致化
  - 修改播放页搜索弹窗的CSS样式，减小标题字体大小，优化搜索历史标签样式和间距
  - 调整搜索区域到搜索历史标签的距离，使整体布局更加精致优雅
  - _需求: 1.1, 1.2, 1.3_

- [x] 2. 修改搜索结果卡片模板
  - 将播放页搜索结果模板中的"详情"按钮替换为画质标签
  - 添加画质标签的数据字段和样式类
  - 确保卡片整体尺寸保持不变
  - _需求: 2.1, 2.2, 5.1, 5.2_

- [x] 3. 实现画质标签功能
  - 创建画质标签点击处理函数，支持手动重测功能
  - 实现画质标签的状态更新和颜色变化逻辑
  - 集成现有的画质检测模块到播放页搜索结果
  - _需求: 2.2, 2.3, 2.4_

- [x] 4. 修改搜索结果渲染逻辑
  - 更新播放页搜索结果的渲染函数，移除详情按钮事件绑定
  - 添加画质标签的事件绑定和初始化逻辑
  - 确保卡片点击仍能打开详情弹窗
  - _需求: 2.5_

- [x] 5. 统一集数弹窗关闭逻辑
  - 添加搜索状态跟踪，记录弹窗是否从搜索结果打开
  - 修改弹窗关闭处理函数，统一返回搜索结果页面
  - 更新搜索结果点击处理，设置正确的状态标记
  - _需求: 3.1, 3.2, 3.3_

- [x] 6. 修复返回按钮逻辑
  - 在播放页搜索时保存搜索状态到sessionStorage
  - 修改返回按钮事件处理，检测播放页搜索状态
  - 实现首页搜索结果状态的正确恢复
  - _需求: 4.1, 4.2, 4.3_

- [x] 7. 添加首页搜索状态恢复功能
  - 在首页添加URL参数检测，支持搜索状态恢复
  - 实现从sessionStorage恢复搜索结果的逻辑
  - 确保API选择状态和搜索结果的正确恢复
  - _需求: 4.1, 4.3_

- [x] 8. 测试和优化
  - 测试搜索弹窗样式在不同屏幕尺寸下的显示效果
  - 测试画质标签功能的完整流程
  - 测试弹窗关闭和返回逻辑的各种场景
  - 优化性能和用户体验
  - _需求: 1.1, 2.1, 3.1, 4.1_